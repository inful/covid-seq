docker pull nfcore/viralrecon:1.1.0
docker save nfcore/viralrecon:1.1.0 -o Docker/nfcore_viralrecon_1.1.0_docker.tar 
singularity build nfcore_viralrecon_1.1.0.sif docker-archive://Docker/nfcore_viralrecon_1.1.0_docker.tar

docker build -t ivar:1.3_nsc - < Docker/ivar_1_3_Dockerfile
docker save ivar:1.3_nsc -o Docker/ivar_1.3_nsc_docker.tar 
singularity build ivar_1.3_nsc.sif docker-archive://Docker/ivar_1.3_nsc_docker.tar

docker pull quay.io/greninger-lab/swift-pipeline
docker save quay.io/greninger-lab/swift-pipeline -o Docker/primerclip_docker.tar
singularity build primerclip_docker.sif docker-archive://Docker/primerclip_docker.tar


# Check https://github.com/cov-lineages/pangoLEARN/releases 
# Change <PANGOLIN_LEARN_VERSION> in the Dockerfile to appropriate version
# Use the same tag on the dokcer tag and singulatiry version. Last one should be '2021-01-22' instead of '20210129'

docker build -t pangolin_nsc:20210129 - < pangolin_Dockerfile
docker save pangolin_nsc:20210129 -o Docker/pangolin_nsc_20210129_docker.tar 
singularity build pangolin_nsc_20210129.sif docker-archive://Docker/pangolin_nsc_20210129_docker.tar

# 2021 Feb 02
docker build -t pangolin_nsc:2021-01-30 - < pangolin_Dockerfile
docker save pangolin_nsc:2021-01-30 -o Docker/pangolin_nsc_2021-01-30_docker.tar 
singularity build pangolin_nsc_2021-01-30.sif docker-archive://Docker/pangolin_nsc_2021-01-30_docker.tar
ln -s pangolin_nsc_2021-01-30.sif pangolin.sif

# 2021 Feb 05
docker build -t pangolin_nsc:2021-02-01 - < pangolin_Dockerfile
docker save pangolin_nsc:2021-02-01 -o Docker/pangolin_nsc_2021-02-01_docker.tar 
singularity build pangolin_nsc_2021-02-01.sif docker-archive://Docker/pangolin_nsc_2021-02-01_docker.tar
ln -s pangolin_nsc_2021-02-01.sif pangolin.sif

# 2021 Feb 10
docker build -t pangolin_nsc:2021-02-06 - < pangolin_Dockerfile
docker save pangolin_nsc:2021-02-06 -o Docker/pangolin_nsc_2021-02-06_docker.tar 
singularity build pangolin_nsc_2021-02-06.sif docker-archive://Docker/pangolin_nsc_2021-02-06_docker.tar
ln -s pangolin_nsc_2021-02-06.sif pangolin.sif

# 2021 Feb 17
docker build -t pangolin_nsc:2021-02-12 - < pangolin_Dockerfile
docker save pangolin_nsc:2021-02-12 -o Docker/pangolin_nsc_2021-02-12_docker.tar 
singularity build pangolin_nsc_2021-02-12.sif docker-archive://Docker/pangolin_nsc_2021-02-12_docker.tar
ln -s pangolin_nsc_2021-02-12.sif pangolin.sif

# 2021 Feb 17
docker build -t pangolin_nsc:2021-02-12 - < pangolin_Dockerfile
docker save pangolin_nsc:2021-02-12 -o Docker/pangolin_nsc_2021-02-12_docker.tar 
singularity build pangolin_nsc_2021-02-12.sif docker-archive://Docker/pangolin_nsc_2021-02-12_docker.tar
ln -s pangolin_nsc_2021-02-12.sif pangolin.sif

# 2021 Feb 24 -- Updated pangoLEARN version AND software version in Dockerfile (SW version 2.1.8 -> 2.3.2)
#                Even though I specified 2.3.2 in the file, it seems to have used 2.3.3.
docker build -t pangolin_nsc:2021-02-22 - < Docker/pangolin_Dockerfile
docker save pangolin_nsc:2021-02-22 -o Docker/pangolin_nsc_2021-02-22_docker.tar
singularity build pangolin_nsc_2021-02-22.sif docker-archive://Docker/pangolin_nsc_2021-02-22_docker.tar
ln -s pangolin_nsc_2021-02-22.sif pangolin.sif


# Check https://github.com/nextstrain/nextclade/releases
# remove docker and pull again if the tag is above 0.12 Jan 21 2021
# Change tag number to present date

docker pull neherlab/nextclade
docker save neherlab/nextclade -o Docker/nextclade_docker_20210201.tar 
singularity build nextclade_20210201.sif docker-archive://Docker/nextclade_docker_20210201.tar

# 2021 Feb 24 - version 0.13.0 (Note: Nextclade has moved to nextstrain user in Docker Hub)
docker pull nextstrain/nextclade
docker save nextstrain/nextclade -o Docker/nextclade_docker_20210224.tar
singularity build nextclade_20210224.sif docker-archive://Docker/nextclade_docker_20210224.tar
ln -s nextclade_20210224.sif nextclade.sif

# 2021 Mar 18
docker pull nextstrain/nextclade:0.14.1
docker save nextstrain/nextclade:0.14.1 -o Docker/nextclade_docker_20210318.tar
singularity build nextclade_20210318.sif docker-archive://Docker/nextclade_docker_20210318.tar
ln -sf nextclade_20210318.sif nextclade.sif


## docker build -t fhi_nsc_covid - < fhi_nsc_covid_Dockerfile
## docker save fhi_nsc_covid -o Docker/fhi_nsc_covid_docker.tar
## singularity build fhi_nsc_covid_docker.sif docker-archive://Docker/fhi_nsc_covid_docker.tar
